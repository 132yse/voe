{"version":3,"file":"voe.js","sources":["../src/slave.js","../src/reactivity.js"],"sourcesContent":["const PATHNAME = (function () {\r\n  const scripts = document.getElementsByTagName('script')\r\n  return scripts[scripts.length - 1].src\r\n})()\r\n\r\nexport function app (config) {\r\n  const worker = new Worker(PATHNAME)\r\n\r\n  worker.postMessage({ data: 111 })\r\n\r\n  worker.onmessage = function (event) {\r\n    console.log('接受' + event.data)\r\n  }\r\n\r\n  worker.terminate()\r\n}\r\n","const toProxy = new WeakMap()\r\nconst toRaw = new WeakMap()\r\nconst isObj = obj => typeof obj === 'object'\r\n\r\nfunction trigger () {\r\n  console.log('update')\r\n}\r\n\r\nexport function reactive (target) {\r\n  if (!isObj(target)) return target\r\n\r\n  let proxy = toProxy.get(target)\r\n  if (proxy) return proxy\r\n\r\n  if (toRaw.has(target)) return target\r\n\r\n  const handlers = {\r\n    get (target, key, receiver) {\r\n      let res = Reflect.get(target, key, receiver)\r\n      if (isObj(target[key])) {\r\n        return reactive(res)\r\n      }\r\n      return res\r\n    },\r\n    set (target, key, value, receiver) {\r\n      if (key in target) {\r\n        trigger()\r\n      }\r\n      return Reflect.set(target, key, value, receiver)\r\n    },\r\n    deleteProperty () {\r\n      return Reflect.defineProperty(target, key)\r\n    }\r\n  }\r\n\r\n  let observed = new Proxy(target, handlers)\r\n\r\n  toProxy.set(target, observed)\r\n  toRaw.set(observed, target)\r\n  \r\n  return observed\r\n}\r\n"],"names":[],"mappings":";;;;;;EAAA,MAAM,QAAQ,GAAG,CAAC,YAAY;EAC9B,EAAE,MAAM,OAAO,GAAG,QAAQ,CAAC,oBAAoB,CAAC,QAAQ,EAAC;EACzD,EAAE,OAAO,OAAO,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,GAAG;EACxC,CAAC,IAAG;;AAEJ,EAAO,SAAS,GAAG,EAAE,MAAM,EAAE;EAC7B,EAAE,MAAM,MAAM,GAAG,IAAI,MAAM,CAAC,QAAQ,EAAC;;EAErC,EAAE,MAAM,CAAC,WAAW,CAAC,EAAE,IAAI,EAAE,GAAG,EAAE,EAAC;;EAEnC,EAAE,MAAM,CAAC,SAAS,GAAG,UAAU,KAAK,EAAE;EACtC,IAAI,OAAO,CAAC,GAAG,CAAC,IAAI,GAAG,KAAK,CAAC,IAAI,EAAC;EAClC,IAAG;;EAEH,EAAE,MAAM,CAAC,SAAS,GAAE;EACpB,CAAC;;ECfD,MAAM,OAAO,GAAG,IAAI,OAAO,GAAE;EAC7B,MAAM,KAAK,GAAG,IAAI,OAAO,GAAE;EAC3B,MAAM,KAAK,GAAG,GAAG,IAAI,OAAO,GAAG,KAAK,SAAQ;;EAE5C,SAAS,OAAO,IAAI;EACpB,EAAE,OAAO,CAAC,GAAG,CAAC,QAAQ,EAAC;EACvB,CAAC;;AAED,EAAO,SAAS,QAAQ,EAAE,MAAM,EAAE;EAClC,EAAE,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,EAAE,OAAO,MAAM;;EAEnC,EAAE,IAAI,KAAK,GAAG,OAAO,CAAC,GAAG,CAAC,MAAM,EAAC;EACjC,EAAE,IAAI,KAAK,EAAE,OAAO,KAAK;;EAEzB,EAAE,IAAI,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,OAAO,MAAM;;EAEtC,EAAE,MAAM,QAAQ,GAAG;EACnB,IAAI,GAAG,CAAC,CAAC,MAAM,EAAE,GAAG,EAAE,QAAQ,EAAE;EAChC,MAAM,IAAI,GAAG,GAAG,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,GAAG,EAAE,QAAQ,EAAC;EAClD,MAAM,IAAI,KAAK,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,EAAE;EAC9B,QAAQ,OAAO,QAAQ,CAAC,GAAG,CAAC;EAC5B,OAAO;EACP,MAAM,OAAO,GAAG;EAChB,KAAK;EACL,IAAI,GAAG,CAAC,CAAC,MAAM,EAAE,GAAG,EAAE,KAAK,EAAE,QAAQ,EAAE;EACvC,MAAM,IAAI,GAAG,IAAI,MAAM,EAAE;EACzB,QAAQ,OAAO,GAAE;EACjB,OAAO;EACP,MAAM,OAAO,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,GAAG,EAAE,KAAK,EAAE,QAAQ,CAAC;EACtD,KAAK;EACL,IAAI,cAAc,CAAC,GAAG;EACtB,MAAM,OAAO,OAAO,CAAC,cAAc,CAAC,MAAM,EAAE,GAAG,CAAC;EAChD,KAAK;EACL,IAAG;;EAEH,EAAE,IAAI,QAAQ,GAAG,IAAI,KAAK,CAAC,MAAM,EAAE,QAAQ,EAAC;;EAE5C,EAAE,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,QAAQ,EAAC;EAC/B,EAAE,KAAK,CAAC,GAAG,CAAC,QAAQ,EAAE,MAAM,EAAC;EAC7B;EACA,EAAE,OAAO,QAAQ;EACjB,CAAC;;;;;;;;;"}